@namespace Daily.Components.Shared

<MudExpansionPanels Elevation="0" DisableBorders="true" Dense="true" Gutters="false" Class="compact-selector-panel pa-0" Style="min-width: 140px; background: transparent;">
    <MudExpansionPanel Text="@Value" @bind-IsExpanded="_isExpanded" Dense="true" Class="pa-0" Style="background: transparent;">
        <MudList T="string" Clickable="true" Dense="true" DisablePadding="true">
            @foreach (var item in Items)
            {
                <MudListItem OnClick="@(() => OnItemSelected(item))" Dense="true">
                    <MudText Color="@(item == Value ? Color.Primary : Color.Inherit)" Typo="Typo.body2" Class="@(item == Value ? "font-weight-bold" : "")">
                        @item
                    </MudText>
                </MudListItem>
            }
        </MudList>
    </MudExpansionPanel>
</MudExpansionPanels>

@code {
    [Parameter] public string Value { get; set; }
    [Parameter] public EventCallback<string> ValueChanged { get; set; }
    [Parameter] public List<string> Items { get; set; } = new();

    private bool _isExpanded;

    private async Task OnItemSelected(string item)
    {
        Value = item;
        await ValueChanged.InvokeAsync(item);
        _isExpanded = false;
    }
}
