<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:Daily"
             x:Class="Daily.DetailPage"
             Title="Daily Detail"
             BackgroundColor="Transparent">

    <!--<RefreshView x:Name="refreshView" Command="{Binding RefreshCommand}" IsRefreshing="{Binding IsRefreshing, Mode=TwoWay}" RefreshColor="#594AE2" BackgroundColor="Transparent">-->
    <Grid>
        <BlazorWebView x:Name="blazorWebView" HostPage="wwwroot/index.html" BackgroundColor="Transparent">
            <BlazorWebView.RootComponents>
                <RootComponent Selector="#app" ComponentType="{x:Type local:Components.Pages.DetailPane}" />
            </BlazorWebView.RootComponents>
        </BlazorWebView>

        <Grid x:Name="BrowserContainer" IsVisible="False" BackgroundColor="{AppThemeBinding Light=White, Dark=Black}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Browser Header -->
            <Grid Grid.Row="0" HeightRequest="48" BackgroundColor="{AppThemeBinding Light=#F0F0F0, Dark=#1E1E1E}" Padding="10,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <Label x:Name="BrowserTitle" Text="Browser" VerticalOptions="Center" LineBreakMode="TailTruncation" FontAttributes="Bold" TextColor="{AppThemeBinding Light=Black, Dark=White}" Grid.Column="0"/>
                
                <StackLayout Orientation="Horizontal" Grid.Column="1" Spacing="0">
                     <Button x:Name="ReaderButton" Text="ðŸ“–" Clicked="OnReaderModeClicked" WidthRequest="40" HeightRequest="40" 
                            BackgroundColor="Transparent" TextColor="{AppThemeBinding Light=Black, Dark=White}" FontSize="20" ToolTipProperties.Text="Toggle Reader View"/>

                     <Button Text="âœ•" Clicked="OnBrowserCloseClicked" WidthRequest="40" HeightRequest="40" 
                            BackgroundColor="Transparent" TextColor="{AppThemeBinding Light=Black, Dark=White}" FontSize="20"/>
                </StackLayout>
            </Grid>

            <WebView x:Name="InternalBrowser" Grid.Row="1" />
        </Grid>
    </Grid>
    <!--</RefreshView>-->

</ContentPage>
